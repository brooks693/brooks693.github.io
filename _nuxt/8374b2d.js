(window.webpackJsonp=window.webpackJsonp||[]).push([[4,5],{453:function(e,t,n){"use strict";n.r(t);n(11),n(32);var o=n(10),r={props:{open:{type:Boolean,default:!1},accountId:{type:String,required:!0}},data:function(){return{addTransactionDialog:!1,dateMenu:!1,types:["Expense","Income"],form:{date:"",payee:"",type:"",value:"",category:"",notes:""}}},methods:{addTransaction:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fire.firestore.collection("users").doc(e.$fire.auth.currentUser.uid).collection("accounts").doc(e.accountId).collection("transactions").add({created_date:e.$moment().toDate(),payee:e.form.payee,category:e.form.category,date:e.$moment(e.form.date).toDate(),value:"Expense"==e.form.type?-Number(e.form.value):Number(e.form.value),notes:e.form.notes}).then((function(t){e.closeDialog()}));case 2:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.$emit("closeDialog")}}},c=n(50),l=n(51),d=n.n(l),f=n(489),v=n(208),m=n(194),x=n(35),y=n(433),T=n(492),h=n(434),_=n(435),w=n(203),k=n(436),V=n(420),$=n(437),D=n(56),C=n(438),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistant:"","max-width":"400"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("v-card",[n("v-card-title",[e._v("Add Transaction")]),e._v(" "),n("v-card-text",[n("v-form",[n("v-row",[n("v-col",[n("v-menu",{ref:"dateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"autp"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-text-field",e._g({attrs:{value:e.form.date?e.$moment(e.form.date).format("DD-MM-YY"):"",label:"Date",readonly:""}},o))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[e._v(" "),n("v-date-picker",{attrs:{color:"primary","no-title":"",scrollable:""},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dateMenu=!1,e.form.date=""}}},[e._v("\n                                Cancel\n                                ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dateMenu=!1}}},[e._v("\n                                OK\n                                ")])],1)],1)],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Payee"},model:{value:e.form.payee,callback:function(t){e.$set(e.form,"payee",t)},expression:"form.payee"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.types,label:"Type"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Value"},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-autocomplete",{attrs:{"item-value":"id","item-text":"data.name",items:e.$store.state.categories.categories,label:"Category"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-textarea",{attrs:{label:"Notes"},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}})],1)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-btn",{on:{click:e.closeDialog}},[e._v("Cancel")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:e.addTransaction}},[e._v("Add")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VAutocomplete:f.a,VBtn:v.a,VCard:m.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VCol:y.a,VDatePicker:T.a,VDialog:h.a,VForm:_.a,VMenu:w.a,VRow:k.a,VSelect:V.a,VSpacer:$.a,VTextField:D.a,VTextarea:C.a})},497:function(e,t,n){"use strict";n.r(t);n(27),n(272),n(37),n(32);var o=n(10),r={components:{newTransactionDialog:n(453).default},data:function(){return{loading:!1,id:this.$route.params.id,account:{},addingTransaction:!1,transactions:[],selectedTransactions:[],headers:[{text:"Test",value:"data.category"},{text:"Test",value:"date"},{text:"Test",value:"data.payee"},{text:"Test",value:"data.value"},{text:"Test",value:"data.notes"},{text:"Test",value:"actions"}],addTransactionDialogOpen:!1,dateMenu:!1,form:{date:"",payee:"",value:"",category:"",notes:""}}},mounted:function(){this.getAccount(),this.getTransactions()},computed:{filteredTransactions:function(){return this.transactions}},methods:{getAccount:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fire.firestore.collection("users").doc(e.$fire.auth.currentUser.uid).collection("accounts").doc(e.id).onSnapshot((function(t){e.account=t.data()}));case 2:case"end":return t.stop()}}),t)})))()},getTransactions:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$fire.firestore.collection("users").doc(e.$fire.auth.currentUser.uid).collection("accounts").doc(e.id).collection("transactions").onSnapshot((function(t){e.transactions=[];var n=e.account.startingBalance;t.forEach((function(t){e.transactions.push({id:t.id,edit:!1,data:t.data()}),n+=t.data().value})),e.$fire.firestore.collection("users").doc(e.$fire.auth.currentUser.uid).collection("accounts").doc(e.id).update({currentBalance:n.toFixed(2)})}));case 1:case"end":return t.stop()}}),t)})))()},deleteTransactions:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.selectedTransactions.forEach((function(t){e.$fire.firestore.collection("users").doc(e.$fire.auth.currentUser.uid).collection("accounts").doc(e.id).collection("transactions").doc(t.id).delete()})),e.selectedTransactions=[];case 2:case"end":return t.stop()}}),t)})))()}}},c=n(50),l=n(51),d=n.n(l),f=n(208),v=n(194),m=n(35),x=n(433),y=n(493),T=n(436),h=n(437),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Account "+e._s(e.account.accountName)+"\n        "),n("v-spacer"),e._v("\n          Current Balance: "+e._s(e.account.currentBalance)+"\n    ")],1),e._v(" "),n("v-card-text",[n("v-row",[n("v-col",[n("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.addTransactionDialogOpen=!0}}},[e._v("Add")]),n("v-btn",{staticClass:"ml-2",attrs:{disabled:0==e.selectedTransactions.length},on:{click:e.deleteTransactions}},[e._v("Delete")])],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-data-table",{attrs:{"show-select":"",headers:e.headers,items:e.filteredTransactions,dense:""},scopedSlots:e._u([{key:"item.date",fn:function(t){var n=t.item;return[e._v("\n                      "+e._s(e.$moment(n.data.date.toDate()).format("DD/MM/YYYY"))+"\n                  ")]}}]),model:{value:e.selectedTransactions,callback:function(t){e.selectedTransactions=t},expression:"selectedTransactions"}})],1)],1)],1),e._v(" "),n("new-transaction-dialog",{attrs:{accountId:e.id,open:e.addTransactionDialogOpen},on:{closeDialog:function(t){e.addTransactionDialogOpen=!1}}})],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:f.a,VCard:v.a,VCardText:m.b,VCardTitle:m.c,VCol:x.a,VDataTable:y.a,VRow:T.a,VSpacer:h.a})}}]);