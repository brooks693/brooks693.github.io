(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{413:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var n=o(61),l=o(1),c=Object(l.h)("v-toolbar__title"),v=Object(l.h)("v-toolbar__items");n.a},490:function(t,e,o){"use strict";o.r(e);o(85),o(27);var n={components:{containerDialog:o(430).default},data:function(){return{id:this.$route.params.id,loading:!1,site:{},map:{zoom:18,options:{clickableIcons:!1}},polygon:{options:{fillColor:"red",fillOpacity:.2,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2}},locationHeaders:[{text:"Name",value:"name"},{text:"Samples",value:"sampleCount"},{text:"Start Date",value:"startDate"},{text:"End Date",value:"endDate"},{text:"Actions",value:"actions"}],location:{name:"",coordinates:[]},movement:{to:"",amount:"",date:"",time:""},createLocationDialog:!1,locations:[{name:"Test Location 1",coordinates:[{lat:51.522564513305916,lng:.07763248153876745},{lat:51.52193700726174,lng:.07765393921088659},{lat:51.52191364250803,lng:.0796012229556986},{lat:51.522514446651726,lng:.07950466343116247}]}],openLocationDialog:!1,clickedLocation:{},openLocationCenter:{},locationMoveDialog:!1,infoWindowOptions:{pixelOffset:{width:0,height:-35}},activeSample:{},infoWindowOpened:!1}},mounted:function(){this.getSite()},computed:{infoWindowPosition:function(){if(this.activeSample.position)return{lat:parseFloat(this.activeSample.position.lat),lng:parseFloat(this.activeSample.position.lng)}}},methods:{getSite:function(){var t=this;this.site=this.$store.state.sites.find((function(e){return e.id==t.id}))},mapClicked:function(t){this.location.coordinates.push({lat:t.latLng.lat(),lng:t.latLng.lng()}),console.log(t.latLng.lat())},updateEdited:function(t){console.log(t);for(var e=[],i=0;i<t.getLength();i++){for(var path=[],o=0;o<t.getAt(i).getLength();o++){var n=t.getAt(i).getAt(o);path.push({lat:n.lat(),lng:n.lng()})}e.push(path)}this.paths=e},saveLocation:function(){this.site.locations.push({name:this.location.name,coordinates:this.location.coordinates}),this.location.name="",this.location.coordinates=[],this.createLocationDialog=!1},locationClicked:function(t){this.openLocationDialog=!0,this.clickedLocation=t,console.log(t)},locationClosed:function(){this.openLocationDialog=!1,this.clickedLocation={},this.openLocationCenter={}},sampleMarkerClicked:function(t){this.activeSample=t,this.infoWindowOpened=!0},sampleUnclicked:function(){this.activeSample={},this.infoWindowOpened=!1},saveMovement:function(){this.clickedLocation.movements.push({from:this.location.id,to:this.movement.to,date:this.movement.date,time:this.movement.time,amount:this.movement.amount}),this.locationMoveDialog=!1}}},l=o(32),c=o(108),v=o.n(c),r=o(395),d=o(423),m=o(412),_=o(405),f=o(483),h=o(492),k=o(429),w=o(392),x=o(408),L=o(431),D=o(409),S=o(418),C=o(480),y=o(61),M=o(413),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{attrs:{flat:""}},[o("v-toolbar",{attrs:{dense:"",flat:""}},[o("v-toolbar-title",[t._v(t._s(t.site.name))])],1),t._v(" "),o("v-card-text",[o("v-row",[o("v-col",[o("v-row",[o("v-col",[o("v-text-field",{attrs:{dense:"",label:"Name",outlined:"","hide-details":"",readonly:"",value:t.site.name}})],1)],1),t._v(" "),o("v-row",[o("v-col",[o("v-text-field",{attrs:{dense:"",label:"Address",outlined:"","hide-details":"",readonly:"",value:t.site.address}})],1)],1),t._v(" "),o("v-row",[o("v-col",[o("v-text-field",{attrs:{dense:"",label:"Postcode",outlined:"","hide-details":"",readonly:"",value:t.site.postcode}})],1)],1),t._v(" "),o("v-row",[o("v-col",[o("v-text-field",{attrs:{dense:"",label:"Tel",outlined:"","hide-details":"",readonly:"",value:t.site.tel}})],1)],1)],1),t._v(" "),o("v-col",[t._v("\n        "+t._s(t.site.center)+"\n        "),t.site.center?o("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"300px"},attrs:{center:t.site.center,zoom:t.site.zoom,options:t.map.options,mapTypeId:"satellite"}},t._l(t.site.locations,(function(e){return o("gmap-polygon",{key:e.name,attrs:{paths:e.coordinates,editable:!1,options:t.polygon.options}})})),1):t._e()],1)],1),t._v(" "),o("v-divider",{staticClass:"mt-3"}),t._v(" "),o("v-subheader",[t._v("Site Locations")]),t._v(" "),o("v-row",[o("v-col",[o("v-btn",{on:{click:function(e){t.createLocationDialog=!0}}},[t._v("Add")])],1)],1),t._v(" "),o("v-row",[o("v-col",[o("v-data-table",{attrs:{items:t.site.locations,headers:t.locationHeaders},scopedSlots:t._u([{key:"item.actions",fn:function(e){var n=e.item;return[o("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return t.locationClicked(n)}}},[o("v-icon",[t._v("mdi-help")])],1)]}}])})],1)],1)],1),t._v(" "),o("v-dialog",{model:{value:t.createLocationDialog,callback:function(e){t.createLocationDialog=e},expression:"createLocationDialog"}},[o("v-card",[o("v-card-title",[t._v("Create Location")]),t._v(" "),o("v-card-text",[o("v-row",[o("v-col",[o("v-text-field",{attrs:{label:"Name",outlined:"",dense:""},model:{value:t.location.name,callback:function(e){t.$set(t.location,"name",e)},expression:"location.name"}})],1)],1),t._v(" "),o("v-row",[o("v-col",[o("v-text-field",{attrs:{label:"Start Date",outlined:"",dense:""},model:{value:t.location.startDate,callback:function(e){t.$set(t.location,"startDate",e)},expression:"location.startDate"}})],1)],1),t._v(" "),t.loading?t._e():o("GmapMap",{ref:"locationRef",staticStyle:{width:"100%",height:"600px"},attrs:{center:t.site.center,zoom:t.map.zoom,options:t.map.options,mapTypeId:"satellite"},on:{click:function(e){return t.mapClicked(e)}}},[o("gmap-polygon",{attrs:{paths:t.location.coordinates,editable:!0},on:{paths_changed:function(e){return t.updateEdited(e)}}})],1)],1),t._v(" "),o("v-card-actions",[o("v-btn",{on:{click:t.saveLocation}},[t._v("Save")])],1)],1)],1),t._v(" "),t.clickedLocation.name?o("v-dialog",{model:{value:t.openLocationDialog,callback:function(e){t.openLocationDialog=e},expression:"openLocationDialog"}},[o("v-card",[o("v-card-title",[t._v(t._s(t.clickedLocation.name)),o("v-spacer"),o("v-btn",{attrs:{icon:"",small:""},on:{click:t.locationClosed}},[o("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),o("v-card-text",[o("v-row",[o("v-col",[t.site.center?o("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"500px"},attrs:{zoom:19,center:t.clickedLocation.coordinates[0],options:t.map.options,mapTypeId:"satellite"}},[o("gmap-polygon",{attrs:{paths:t.clickedLocation.coordinates,editable:!1,options:t.polygon.options}}),t._v(" "),t._l(t.clickedLocation.samples,(function(e){return o("gmap-marker",{key:e.id,attrs:{label:e.id,position:e.position,clickable:!0},on:{click:function(o){return t.sampleMarkerClicked(e)}}})})),t._v(" "),o("gmap-info-window",{attrs:{options:t.infoWindowOptions,position:t.infoWindowPosition,opened:t.infoWindowOpened},on:{closeClick:t.sampleUnclicked}},[t._v("\n                "+t._s(t.activeSample.id)+"\n                "),t._l(t.activeSample.results,(function(e,n){return o("v-row",{key:"res"+n,staticClass:"text-h6",attrs:{dense:""}},[o("v-col",[t._v(t._s(e.det)+": ")]),t._v(" "),o("v-col",[t._v(t._s(e.value))])],1)}))],2)],2):t._e()],1)],1),t._v(" "),o("v-row",[o("v-col",[o("v-row",[o("v-col",[o("v-text-field",{attrs:{outlined:"",dense:"","hide-details":"",value:t.clickedLocation.sampleCount,label:"Samples"}})],1)],1),t._v(" "),o("v-row",[o("v-col",[o("v-text-field",{attrs:{outlined:"",dense:"","hide-details":"",value:t.clickedLocation.startDate,label:"Start Date"}})],1)],1),t._v(" "),o("v-row",[o("v-col",[o("v-text-field",{attrs:{outlined:"",dense:"","hide-details":"",value:t.clickedLocation.endDate,label:"End Date"}})],1)],1)],1),t._v(" "),o("v-col",[o("v-row",[o("v-col",{staticClass:"text-h6"},[t._v("Samples")])],1),t._v(" "),t._l(t.clickedLocation.samples,(function(e){return o("v-row",{key:"sample"+e.id},[o("v-col",[t._v("ID: "+t._s(e.id))]),t._v(" "),o("v-col",[t._v("Sampled Date: "+t._s(e.sampledDate))]),t._v(" "),o("v-col",[t._v("Status: "+t._s(e.status))]),t._v(" "),o("v-col",[o("v-btn",{attrs:{small:""},on:{click:function(o){return t.sampleMarkerClicked(e)}}},[t._v("Results")])],1)],1)}))],2),t._v(" "),o("v-col",[o("v-row",[o("v-col",{staticClass:"text-h6"},[t._v("Movements")]),t._v(" "),o("v-col",[o("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.locationMoveDialog=!0}}},[t._v("Movement")])],1)],1),t._v(" "),o("v-row",[o("v-col",[t._v("\n             "+t._s(t.clickedLocation.movements)+"\n              ")])],1)],1)],1),t._v(" "),o("v-col"),o("v-col")],1)],1)],1):t._e(),t._v(" "),t.clickedLocation.name?o("v-dialog",{attrs:{width:"500"},model:{value:t.locationMoveDialog,callback:function(e){t.locationMoveDialog=e},expression:"locationMoveDialog"}},[o("v-card",{attrs:{flat:""}},[o("v-card-title",[t._v("Movement"),o("v-spacer"),o("v-btn",{on:{click:function(e){t.locationMoveDialog=!1}}},[t._v("Close")])],1),t._v(" "),o("v-card-text",[o("v-text-field",{attrs:{dense:"",outlined:"",label:"Amount"},model:{value:t.movement.amount,callback:function(e){t.$set(t.movement,"amount",e)},expression:"movement.amount"}}),t._v(" "),o("v-text-field",{attrs:{dense:"",outlined:"",label:"Date"},model:{value:t.movement.date,callback:function(e){t.$set(t.movement,"date",e)},expression:"movement.date"}}),t._v(" "),o("v-text-field",{attrs:{dense:"",outlined:"",label:"Time"},model:{value:t.movement.time,callback:function(e){t.$set(t.movement,"time",e)},expression:"movement.time"}}),t._v(" "),o("v-select",{attrs:{label:"Where to...",dense:"",outlined:"",items:t.site.locations.filter((function(e){return e.name!==t.clickedLocation.name})),"item-value":"id","item-text":"name"},model:{value:t.movement.to,callback:function(e){t.$set(t.movement,"to",e)},expression:"movement.to"}})],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:t.saveMovement}},[t._v("Save")])],1)],1)],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;v()(component,{VBtn:r.a,VCard:d.a,VCardActions:m.a,VCardText:m.b,VCardTitle:m.c,VCol:_.a,VDataTable:f.a,VDialog:h.a,VDivider:k.a,VIcon:w.a,VRow:x.a,VSelect:L.a,VSpacer:D.a,VSubheader:S.a,VTextField:C.a,VToolbar:y.a,VToolbarTitle:M.a})}}]);